set -o vi
export EDITOR=vim

# bash completions
if type "brew" > /dev/null 2>&1; then
  if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
  fi

  if [ -f `brew --prefix`/etc/bash_completion.d/git-completion.bash ]; then
    . `brew --prefix`/etc/bash_completion.d/git-completion.bash
  fi

  if [ -f `brew --prefix`/etc/bash_completion.d/git-prompt.sh ]; then
    . `brew --prefix`/etc/bash_completion.d/git-prompt.sh
  fi

  __git_complete gc _git_checkout
  __git_complete gb _git_branch
fi

# prompt stuff
GIT_PS1_SHOWDIRTYSTATE=true

# Prompt char for user or root
_prompt_char() {
  local char=âž”
  [ "$UID" == 0 ] && char=\$
  printf "$char"
}

export PS1='\W$(__git_ps1 "(%s)") $(_prompt_char) '

# chruby setup
if [[ -e /usr/local/share/chruby ]]; then
  source /usr/local/share/chruby/chruby.sh
  source /usr/local/share/chruby/auto.sh
fi

# direnv setup
if type "direnv" > /dev/null 2>&1; then
  eval "$(direnv hook $0)"
fi

# nvm setup
export NVM_DIR=~/.nvm
if [ -f `brew --prefix nvm`/nvm.sh ]; then
  . $(brew --prefix nvm)/nvm.sh
fi

# aliases and functions
if [ -f ~/.bash_aliases ]; then
  . ~/.bash_aliases
fi
